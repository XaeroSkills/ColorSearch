"use strict";var __awaiter=this&&this.__awaiter||function(e,r,t,i){return new(t||(t=Promise))(function(n,a){function s(e){try{u(i.next(e))}catch(e){a(e)}}function o(e){try{u(i.throw(e))}catch(e){a(e)}}function u(e){e.done?n(e.value):new t(function(r){r(e.value)}).then(s,o)}u((i=i.apply(e,r||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const express=require("express"),bodyParser=require("body-parser"),ImageSaver_1=require("./server/core/image-saver/ImageSaver"),IndexLSH_1=require("./server/core/index/IndexLSH"),Settings_1=require("./server/core/Settings"),Router_1=require("./server/routing/Router"),config=Settings_1.default.global(),app=express();(()=>__awaiter(this,void 0,void 0,function*(){const e=new IndexLSH_1.default(Settings_1.default.index());yield e.load(),new ImageSaver_1.default(e,Settings_1.default.imageSaver()).start(),app.use(express.static(config.imgsPath)),app.use(express.static("client/")),app.use(bodyParser.json({limit:"50mb"})),new Router_1.default(app,e),app.listen(config.port,config.ip),console.log("server started on "+config.ip+":"+config.port)}))(),module.exports=app;