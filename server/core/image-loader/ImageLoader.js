"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const childProcess=require("child_process"),Settings_1=require("../Settings"),fork=childProcess.fork;class ImageLoader{constructor(){this.child=null;const e=Settings_1.default.imageLoader();this.enabled=e.enabled,this.sleepTime=e.sleepTime}start(e){this.enabled&&(this.child=fork("./server/core/image-loader/ImageLoading.js"),this.child.on("message",s=>{switch(s.message){case"sleep":this.stop(),setTimeout(()=>this.start(e),this.sleepTime);break;case"images-saved":e.indexMany(s.images);break;case"restart":this.stop(),setTimeout(()=>this.start(e),6e4)}}))}stop(){this.child&&this.child.kill()}}exports.default=ImageLoader;