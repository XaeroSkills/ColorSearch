"use strict";var __awaiter=this&&this.__awaiter||function(e,t,r,u){return new(r||(r=Promise))(function(n,i){function s(e){try{o(u.next(e))}catch(e){i(e)}}function a(e){try{o(u.throw(e))}catch(e){i(e)}}function o(e){e.done?n(e.value):new r(function(t){t(e.value)}).then(s,a)}o((u=u.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const request=require("request"),Debug=require("debug"),debug=Debug("FlickrSourceImageInspectingStrategy");class FlickrImageInspectingStrategy{constructor(){this.name="flickr"}imageIsOk(e){return __awaiter(this,void 0,void 0,function*(){return yield new Promise((t,r)=>{let u=!0;request({method:"GET",uri:e.url,followRedirect:!1},(e,r,n)=>{const i=!e&&r.statusCode?Number(r.statusCode).toString():"0";!e&&r.statusCode&&debug("status code: "+r.statusCode),!e&&[3,4].includes(parseInt(i[0],10))&&(debug("delete faulty image..."),u=!1),t(u)})})})}sourceName(){return this.name}}exports.default=FlickrImageInspectingStrategy;