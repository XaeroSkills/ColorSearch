"use strict";var __awaiter=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))(function(n,u){function s(e){try{o(r.next(e))}catch(e){u(e)}}function a(e){try{o(r.throw(e))}catch(e){u(e)}}function o(e){e.done?n(e.value):new i(function(t){t(e.value)}).then(s,a)}o((r=r.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const request=require("request"),Debug=require("debug"),debug=Debug("DirectorySourceImageInspectingStrategy");class LocalImageInspectingStrategy{constructor(){this.name="directory"}imageIsOk(e){return __awaiter(this,void 0,void 0,function*(){debug("inspect...");let t=!0;return t=(t=yield this.imageURLisOK(e.url))&&(yield this.imageURLisOK(e.previewURL))})}sourceName(){return this.name}imageURLisOK(e){return __awaiter(this,void 0,void 0,function*(){return yield new Promise((t,i)=>{let r=!0;request({method:"GET",uri:e},(e,i,n)=>{!e&&i.statusCode&&debug("status code: "+i.statusCode),(e||200!==i.statusCode)&&(r=!1),t(r)})})})}}exports.default=LocalImageInspectingStrategy;