"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const XRegExp=require("xregexp"),keywordExtractor=require("keyword-extractor"),sanitizeHtml=require("sanitize-html"),stemmer=require("node-snowball");class TextUtil{constructor(){this.pattern="[^\\pN\\pL]+",this.patternRegGlobal=XRegExp(this.pattern,"gi"),this.patternReg=XRegExp(this.pattern)}normalizedEnglishWords(e){let t=[];if(e&&e.length>0){e=this.cleanText(e).toLowerCase();const r={language:"english",remove_digits:!0,remove_duplicates:!1,return_changed_case:!0};t=keywordExtractor.extract(e,r),t=stemmer.stemword(t,"english"),(t=this.uniqSet(t)).length>100&&(t=t.slice(0,100))}return t}cleanText(e){const t=this.patternRegGlobal;return sanitizeHtml(e,{allowedAttributes:[],allowedTags:[],textFilter:e=>e.replace(t," ")})}uniqSet(e){return[...new Set(e)]}tokenizeText(e){return e.split(this.patternReg)}getHashCode(e){let t=0;for(let r=0,s=e.length;r<s;++r)t=(t<<5)-t+e.charCodeAt(r),t&=t;return t}}exports.default=new TextUtil;