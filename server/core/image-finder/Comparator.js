"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const ResultDTO_1=require("../dto/ResultDTO"),Debug=require("debug"),debug=Debug("Comparator");class Comparator{constructor(t){this.descriptor=t.descriptor,this.colorDistance=t.distance,this.colorDistanceThreshold=(1-t.similarityLevel/100)*this.colorDistance.maxL1NormalizedPointsDistance(),this.maxColorDistance=this.colorDistance.maxL1NormalizedPointsDistance()}getRequestDescriptor(){return this.descriptor}compare(t,e){const s=this.colorDistance.calculate(this.descriptor.histogram,t.histogram);if(s<=this.colorDistanceThreshold){const o=1-s/this.maxColorDistance,r=o;e.push(new ResultDTO_1.default(t,o,r))}}}exports.default=Comparator;