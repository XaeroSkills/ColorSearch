"use strict";var __awaiter=this&&this.__awaiter||function(e,n,t,i){return new(t||(t=Promise))(function(r,o){function a(e){try{u(i.next(e))}catch(e){o(e)}}function c(e){try{u(i.throw(e))}catch(e){o(e)}}function u(e){e.done?r(e.value):new t(function(n){n(e.value)}).then(a,c)}u((i=i.apply(e,n||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const Settings_1=require("../../Settings"),Debug=require("debug"),debug=Debug("ImageFinderDAO");class ImageFinderDAO{linearQuery(e,n){return __awaiter(this,void 0,void 0,function*(){const t=new Array,i=yield Settings_1.default.dbConnection();return new Promise((r,o)=>{i?i.collection("Images").find({}).batchSize(50).forEach(i=>n.compare(e,i,t),e=>{r(t)}):r(t)})})}queryByIndexIds(e,n,t){return __awaiter(this,void 0,void 0,function*(){const i=new Array,r=yield Settings_1.default.dbConnection();return new Promise((o,a)=>{r?r.collection("Images").find({indexId:{$in:e}}).batchSize(50).forEach(e=>t.compare(n,e,i),e=>{o(i)}):o(i)})})}}exports.default=ImageFinderDAO;